<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>protolib: protolib</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">protolib
   </div>
   <div id="projectbrief">C++17 library for binary protocol serialization and parsing</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('index.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">protolib </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_docs_2mainpage"></a> </p>
<h1><a class="anchor" id="autotoc_md3"></a>
üß† Overview</h1>
<p><b>protolib</b> is a modern C++17 library for declarative definition, serialization, and parsing of binary communication protocols. <br  />
 It provides a zero-allocation, strongly typed approach to building and testing data exchange layers for both embedded and PC environments.</p>
<hr  />
<h2><a class="anchor" id="autotoc_md5"></a>
‚ú® Key Features</h2>
<ul>
<li><b>Per-field Endianness Control</b> ‚Äî each field can independently specify <em>little-endian</em> or <em>big-endian</em> encoding.</li>
<li><b>Zero Dynamic Allocation</b> ‚Äî all protocol data resides within a statically defined buffer; no heap memory is used during parsing or serialization.</li>
<li><b>Strict Type Safety</b> ‚Äî every field explicitly defines its type and size at compile time, ensuring layout consistency and safety.</li>
<li><b>Incremental Parsing</b> ‚Äî packets can be parsed progressively as data arrives (chunk-by-chunk), supporting streaming or UART-style communications.</li>
<li><b>Structured Packet Definition</b> ‚Äî each protocol defines a clear data layout; array or vector fields are automatically recognized as contiguous buffers.</li>
<li><b>Debug-Friendly Tracing</b> ‚Äî includes readable debug output for packet parsing and field inspection, simplifying communication debugging.</li>
<li><b>Payload Isolation</b> ‚Äî payload data is logically separated from protocol metadata, but the full packet object (header + fields + CRC) is accessible for analysis.</li>
<li><b>Nested Protocols</b> ‚Äî protocols can embed or encapsulate other protocols, supporting complex hierarchical message structures.</li>
<li><b>Custom Field Handlers</b> ‚Äî extend behavior by defining custom CRCs or field parsers to tailor logic for specific protocol requirements.</li>
<li><b>Configurable Length and CRC Fields</b> ‚Äî easily define which fields participate in <em>length</em> and <em>CRC</em> calculations.</li>
</ul>
<hr  />
<h2><a class="anchor" id="autotoc_md7"></a>
Protocol Architecture</h2>
<p>Most binary transports share a recurring set of header fields that describe the message:</p>
<ul>
<li><code>ID_FIELD</code> ‚Äì protocol/message identifier <br  />
</li>
<li><code>TYPE_FIELD</code> ‚Äì message subtype or operation code <br  />
</li>
<li><code>LEN_FIELD</code> ‚Äì packet length or payload length <br  />
</li>
<li><code>SOURCE_FIELD</code> / <code>DEST_FIELD</code> ‚Äì addressing / routing <br  />
</li>
<li><code>VERSION_FIELD</code> ‚Äì protocol versioning <br  />
</li>
<li><code>CRC_FIELD</code> ‚Äì integrity check (CRC/checksum) <br  />
</li>
<li>‚Ä¶and others defined in your specification (see <a class="el" href="d6/dca/namespaceproto.html#a38010252d4a3be86b06de5a25d4b1c2f">FieldName</a>).</li>
</ul>
<p><code>protolib</code> lets you compose these fields <b>in any order required</b> by your transport. Each field is strongly typed and may specify its own endianness. You declare the structure once and reuse it across targets.</p>
<hr  />
<h3><a class="anchor" id="autotoc_md9"></a>
Containers and protocol reuse</h3>
<p>A <b>container</b> is a reusable layout made of fields (header + payload descriptors). <br  />
 The <b>same container</b> can be applied <b>multiple times</b> across different protocols to avoid duplication. <br  />
 A single protocol may also define <b>distinct Rx and Tx containers</b> when the receive and transmit formats differ.</p>
<div class="fragment"><div class="line">[Field] + [Field] + [Field]  ‚Üí  Container</div>
<div class="line">Container(Rx) + Container(Tx) ‚Üí Protocol</div>
</div><!-- fragment --><p>Because containers are independent, you can keep shared header logic in one place and mix in protocol‚Äëspecific payloads where needed.</p>
<hr  />
<h3><a class="anchor" id="autotoc_md11"></a>
Multiple protocols over one interface</h3>
<p>It‚Äôs common to multiplex several protocols over a single byte stream (UART/TCP/SPI). <br  />
 You can instantiate multiple protocol parsers and <b>feed the same incoming stream</b> to each until one recognizes a valid packet:</p>
<div class="fragment"><div class="line">            (byte stream)</div>
<div class="line">[Interface] ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫ Demux</div>
<div class="line">                 ‚îú‚îÄ‚îÄ‚ñ∫ Protocol A (RxContainer)</div>
<div class="line">                 ‚îú‚îÄ‚îÄ‚ñ∫ Protocol B (RxContainer)</div>
<div class="line">                 ‚îî‚îÄ‚îÄ‚ñ∫ Protocol C (RxContainer)</div>
</div><!-- fragment --><p>Each protocol consumes only the bytes it needs; partial data is supported through incremental parsing.</p>
<hr  />
<h3><a class="anchor" id="autotoc_md13"></a>
CRC/length configuration</h3>
<p>Length/CRC are often computed <b>only over specific ranges</b> (for example, from <code>TYPE_FIELD</code> to end of payload). <br  />
 Protocols can explicitly mark which fields participate in <code>LEN</code> / <code>ALEN</code> / <code>CRC</code> calculations and plug in <b>custom algorithms</b> (your own CRC or validator) via extensible field handlers.</p>
<hr  />
<h3><a class="anchor" id="autotoc_md15"></a>
Testing with GoogleTest</h3>
<p>After defining a protocol, you can validate it with <b>GoogleTest</b> by mocking the interface and asserting on parsed results:</p>
<div class="fragment"><div class="line"><span class="comment">// Arrange: feed a byte stream into the protocol&#39;s Rx container</span></div>
<div class="line"><span class="keyword">auto</span> <a class="code hl_class" href="d6/d58/classCustomSpan.html">bytes</a> = <a class="code hl_class" href="d6/d58/classCustomSpan.html">make_frame</a>(<span class="comment">/* header+payload with CRC */</span>);</div>
<div class="line"><a class="code hl_class" href="d6/d58/classCustomSpan.html">ProtocolA</a> <a class="code hl_class" href="d6/d58/classCustomSpan.html">protoA</a>;</div>
<div class="line"><span class="keyword">auto</span> <a class="code hl_class" href="d6/d58/classCustomSpan.html">consumed</a> = <a class="code hl_class" href="d6/d58/classCustomSpan.html">protoA</a>.feed(<a class="code hl_class" href="d6/d58/classCustomSpan.html">bytes</a>);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Assert: the packet was recognized and fields decoded</span></div>
<div class="line"><a class="code hl_class" href="d6/d58/classCustomSpan.html">EXPECT_GT</a>(<a class="code hl_class" href="d6/d58/classCustomSpan.html">consumed</a>, 0);</div>
<div class="line"><a class="code hl_class" href="d6/d58/classCustomSpan.html">EXPECT_EQ</a>(<a class="code hl_class" href="d6/d58/classCustomSpan.html">protoA</a>.rx().id.value(), 0x42);</div>
<div class="line"><span class="comment">// If using matchers:</span></div>
<div class="line"><a class="code hl_class" href="d6/d58/classCustomSpan.html">EXPECT_THAT</a>(<a class="code hl_class" href="d6/d58/classCustomSpan.html">protoA</a>.rx().payload, <a class="code hl_function" href="d6/d58/classCustomSpan.html#adf665d2b306d731b0ae135ed3f328531">::testing::SizeIs</a>(8));</div>
<div class="ttc" id="aclassCustomSpan_html"><div class="ttname"><a href="d6/d58/classCustomSpan.html">CustomSpan</a></div><div class="ttdef"><b>Definition</b> <a href="d1/dcf/CustomSpan_8hpp_source.html#l00008">CustomSpan.hpp:8</a></div></div>
<div class="ttc" id="aclassCustomSpan_html_adf665d2b306d731b0ae135ed3f328531"><div class="ttname"><a href="d6/d58/classCustomSpan.html#adf665d2b306d731b0ae135ed3f328531">CustomSpan::CustomSpan</a></div><div class="ttdeci">CustomSpan()</div><div class="ttdef"><b>Definition</b> <a href="d1/dcf/CustomSpan_8hpp_source.html#l00010">CustomSpan.hpp:10</a></div></div>
</div><!-- fragment --><p>This approach enables fast, deterministic tests for both serialization and parsing, and keeps protocol logic decoupled from I/O.</p>
<hr  />
<h2><a class="anchor" id="autotoc_md17"></a>
üìö Documentation Structure</h2>
<ul>
<li>API Reference ‚Äî classes, fields, and serialization methods</li>
<li><a class="el" href="dir_5280ec33e0efe019e655258f927f0b9b.html">Protocol Implementations</a> ‚Äî defined packet layouts</li>
<li>Usage Examples ‚Äî minimal examples and integration snippets</li>
<li>Integration with CMake and Conan ‚Äî build system notes</li>
</ul>
<hr  />
<h2><a class="anchor" id="autotoc_md19"></a>
üß© Integration</h2>
<h3><a class="anchor" id="autotoc_md20"></a>
Using CMake FetchContent</h3>
<div class="fragment"><div class="line">include(FetchContent)</div>
<div class="line">FetchContent_Declare(</div>
<div class="line">  protolib</div>
<div class="line">  GIT_REPOSITORY https://github.com/iahve-space/protolib.git</div>
<div class="line">  GIT_TAG main</div>
<div class="line">)</div>
<div class="line">FetchContent_MakeAvailable(protolib)</div>
<div class="line"> </div>
<div class="line">target_link_libraries(your_app PRIVATE proto)</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md21"></a>
Using Conan</h3>
<div class="fragment"><div class="line">conan create . --version=&quot;${VERSION}&quot; -s:h build_type=Release</div>
</div><!-- fragment --><p>and in your <code><a class="el" href="d6/d58/classCustomSpan.html#adf665d2b306d731b0ae135ed3f328531">CMakeLists.txt</a></code>:</p>
<div class="fragment"><div class="line">find_package(protolib REQUIRED)</div>
<div class="line">target_link_libraries(your_app PRIVATE proto::protolib)</div>
</div><!-- fragment --><hr  />
<h2><a class="anchor" id="autotoc_md23"></a>
üß≠ Supported Platforms</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Platform   </th><th class="markdownTableHeadNone">Compiler   </th><th class="markdownTableHeadNone">Status    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Linux   </td><td class="markdownTableBodyNone">GCC / Clang   </td><td class="markdownTableBodyNone">‚úÖ    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">macOS   </td><td class="markdownTableBodyNone">Clang   </td><td class="markdownTableBodyNone">‚úÖ    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Windows   </td><td class="markdownTableBodyNone">MinGW / MSVC   </td><td class="markdownTableBodyNone">‚öôÔ∏è    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Embedded (NuttX / STM32)   </td><td class="markdownTableBodyNone">Cross-compile via <code>BUILD_FOR_TARGET</code>   </td><td class="markdownTableBodyNone">üîß   </td></tr>
</table>
<blockquote class="doxtable">
<p>&zwj;‚ö†Ô∏è Some usage differences may apply on embedded targets ‚Äî see the <a href="https://github.com/iahve-space/protolib/wiki">Wiki</a> for details. </p>
</blockquote>
<h2><a class="anchor" id="autotoc_md24"></a>
üß± Project Structure</h2>
<div class="fragment"><div class="line">include/        # Public headers (core API)</div>
<div class="line">protocols/      # Protocol definitions and tests</div>
<div class="line">libraries/      # Internal implementation</div>
<div class="line">tests/          # Unit tests (GoogleTest)</div>
<div class="line">docs/           # Documentation (Doxygen + Pages)</div>
</div><!-- fragment --><hr  />
<h2><a class="anchor" id="autotoc_md26"></a>
üß© Repository &amp; License</h2>
<ul>
<li><b>Repository:</b> <a href="https://github.com/iahve-space/protolib">github.com/iahve-space/protolib</a></li>
<li><b>License:</b> GNU GPL v3</li>
<li><b>Maintainer:</b> <a href="https://github.com/iahve-space">iahve-space</a></li>
</ul>
<hr  />
<h2><a class="anchor" id="autotoc_md28"></a>
‚ù§Ô∏è Acknowledgements</h2>
<p>This project is part of the <b>iahve-space</b> infrastructure ‚Äî <br  />
 a unified build ecosystem based on <b>CMake + Conan</b>, <br  />
 focused on <b>embedded development</b>, <b>cross-compilation</b>, and <b>reproducible builds</b>.</p>
<hr  />
<p><sub>¬© 2025 iahve-space. Built with ‚ù§Ô∏è and C++17.</sub> </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
